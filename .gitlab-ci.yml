include:
  - project: accelerator-controls/environment/ci
    file: setGenericEnv.yml
  - project: accelerator-controls/environment/ci
    file: centos7-epics.yml
  - project: accelerator-controls/environment/ci
    file: debian11-epics.yml
  - project: accelerator-controls/environment/ci
    file: rocky8-epics.yml
  - project: accelerator-controls/environment/ci
    file: sl7-epics.yml

stages:
  - build
  - test
  
centos7-builder:
    script:
        - git ls-files --exclude='*.bash' --ignored | xargs shellcheck  || echo "No script found! or shellcheck error"

centos7-tester:
    script:
        - export USERNAME="gitlab"
        - bash ${CI_PROJECT_DIR}/test.bash

debian11-builder:
    script:
        - git ls-files --exclude='*.bash' --ignored | xargs shellcheck  || echo "No script found! or shellcheck error"

debian11-tester:
    script:
        - export USERNAME="gitlab"
        - bash ${CI_PROJECT_DIR}/test.bash

rocky8-builder:
    script:
        - git ls-files --exclude='*.bash' --ignored | xargs shellcheck  || echo "No script found! or shellcheck error"

rocky8-tester:
    script:
        - export USERNAME="gitlab"
        - bash ${CI_PROJECT_DIR}/test.bash
        
sl7-builder:
    script:
        - git ls-files --exclude='*.bash' --ignored | xargs shellcheck || echo "No script found! or shellcheck error"

sl7-tester:
    script:
        - export USERNAME="gitlab"
        - bash ${CI_PROJECT_DIR}/test.bash
