---
variables:
  GIT_DEPTH: 2

include:
  - project: 'accelerator-controls/environment/ci'
    ref: master # a22f89f2e751508cad42734cecd04783e40b468f # (GIT SHA) # v1.0.0 (GIT TAG) # master (GIT BRANCH)
    file: 'setEnvALSU.yml'
  - project: accelerator-controls/environment/ci
    ref: master
    file: 'debian12-epics.yml'
  - project: accelerator-controls/environment/ci
    ref: master
    file: 'rocky8-epics.yml'
  - project: accelerator-controls/environment/ci
    ref: master
    file: 'rocky9-epics.yml'

stages:
  - build
  - test

debian12-builder:
  script:
    - echo "Running tests... "
    - export USER=test && bash test.bash > Debian12.test.txt

rocky8-builder:
  tags:
    - rocky8-epics
  stage: build
  script:
    - echo "Running tests..."
    - export USER=test && bash test.bash > Rocky8.text.txt

rocky9-builder:
  tags:
    - rocky9-epics
  stage: build
  script:
    - echo "Running tests..."
    - export USER=test && bash test.bash > Rocky9.test.txt
